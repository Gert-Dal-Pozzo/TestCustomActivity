<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="//cdn.evgnet.com/beacon/cesposito523002365/dec2022_staging/scripts/evergage.min.js"></script>
    <!-- script>
        document.addEventListener(Evergage.CustomEvents.OnEventResponse, (e) => {
          console.log(e);
          if(e.detail.response && e.detail.reponse.campaignResponses){
            let stats = [];
            for (const camp of e.detail.response.campaignResponses){
              let payload = camp.payload;
              let isControl = "Control" === payload.userGroup;
              if (!isControl){
                
                var textElement = document.getElementById("campaignResponse");
                textElement.innerHTML += "<br/>"+payload;
                console.log(payload);
              }
              
              stats.push({
                experienceId : payload.experience,
                stat: "Impression",
                control: isControl
              });
            }
            Evergage.sendStat({campaignStats: stats});
          }
        });
    </script -->
    <!-- script type="text/javascript">     
     var testUserId = "Test_EncContactKey";
		
        (function() {
            var apiUrl = 'https://cesposito523002365.australia-3.evergage.com/api2/event/dec2022_staging';
			// Non funziona, va tolta l'indicazione della source var data = '{"action":"test","source":{"channel":"Server","contentZones":[]},"user":{"id":"'+testUserId+'"}}';
			var data = '{"action":"test","source":{"contentZones":[]},"user":{"id":"'+testUserId+'"}}';
			var textResponse = "";
			var headers = new Headers();
			console.log("sending non auth Event API Request to SS Campaign");
			headers.append('content-type', 'application/x-www-form-urlencoded');
			var getRequest = apiUrl;
			fetch(getRequest, {method: 'POST',
							   headers: headers,
							   body: "event="+btoa(data)}).then(res => console.log(res));
        })();
 </script -->
	  
	  
	  
<!-- script type="text/javascript">     
     var testUserId = "Test_EncContactKey";
		
        (function() {
            var apiUrl = 'https://cesposito523002365.australia-3.evergage.com/api2/event/dec2022_staging?event=';
			// Non funziona, va tolta l'indicazione della source var data = '{"action":"test","source":{"channel":"Server","contentZones":[]},"user":{"id":"'+testUserId+'"}}';
			var data = '{"action":"test","source":{"channel":"Server","contentZones":[]},"user":{"id":"'+testUserId+'"}}';
			var textResponse = "";
			var headers = new Headers();
			console.log("sending get non auth Event API Request to SS Campaign");
			headers.append('content-type', 'application/x-www-form-urlencoded');
			var getRequest = apiUrl+btoa(data);
			fetch(getRequest, {method: 'GET',
					   headers: headers
					  }).then(res => console.log(res));
        })();
 </script -->

	 <script type="text/javascript">     
     var testUserId = "Test_EncContactKey";
		
        (function() {
            var apiUrl = 'https://cesposito523002365.australia-3.evergage.com/api2/authevent/dec2022_staging';
			var data = '{"action":"test","source":{"channel":"Server","contentZones":[]},"user":{"id":"'+testUserId+'"}}';
			
			var textResponse = "";
			var headers = new Headers();
			console.log("sending auth Event API Request to SS Campaign");
			headers.append('content-type', 'application/x-www-form-urlencoded');
			headers.append('Authorization', 'Basic '+btoa("AACEAA8D-85EE-46C2-AD40-1538E4DEC73C:IYjNVTciO5V_PKyw2avsMvQ6gZBI26eaptlbx1YkGMc"));
			var getRequest = apiUrl;
			fetch(getRequest, {method: 'POST',
							   headers: headers,
							   body: "event="+btoa(data)}).then(res => console.log(res));
        })();
 </script>

	  
  </head>
<body>
<div id="contentzone1">
<h1 id="InnercontentZone">Please join the survey below</h1>
  <div id="textContainer">
    <p id="campaignResponse"></p>
  </div>
  </div>

</body>
</html>
